import{_ as M}from"./MediaLibrary.304c1a9c.js";import{c as S,_ as L}from"./RichEditor.client.f2fbfaeb.js";import{_ as B}from"./Loader.81680a5b.js";import{u as U,c as u,b as n,w as l,a,m as p,e as h,F as D,g as O,r as i,o as d,d as v,x as T,y as $}from"./entry.dc9af3c6.js";import{c as z}from"./createSlug.32ba2e5c.js";import{h as I}from"./moment.a9aaa855.js";const F=S(L),K={class:"grid animate-fade"},A={class:"col-12"},E={class:"card"},H=a("h3",{class:"text-2xl font-medium mb-5"},"Tambah Kegiatan",-1),N={class:"grid grid-cols-1 gap-3"},R={class:"col-span-1"},q={class:"mt-3"},P=a("div",{class:"mb-3 mt-5 text-lg font-medium my-1"},"Thumbnail",-1),Y={key:0,class:"relative w-fit"},j=$('<svg xmlns="http://www.w3.org/2000/svg" width="1.5em" height="1.5em" viewBox="0 0 48 48"><defs><mask id="ipSCloseOne0"><g fill="none" stroke-linejoin="round" stroke-width="4"><path fill="#fff" stroke="#fff" d="M24 44c11.046 0 20-8.954 20-20S35.046 4 24 4S4 12.954 4 24s8.954 20 20 20Z"></path><path stroke="#000" stroke-linecap="round" d="M29.657 18.343L18.343 29.657m0-11.314l11.314 11.314"></path></g></mask></defs><path fill="#10B981" d="M0 0h48v48H0z" mask="url(#ipSCloseOne0)"></path></svg>',1),J=[j],Z={class:"mb-6 mt-6"},G=a("div",{class:"flex items-center"},[a("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1.3em",height:"1.3em",viewBox:"0 0 20 20"},[a("path",{fill:"white",d:"M17.125 6.17L15.079.535c-.151-.416-.595-.637-.989-.492L.492 5.006c-.394.144-.593.597-.441 1.013l2.156 5.941V8.777c0-1.438 1.148-2.607 2.56-2.607H8.36l4.285-3.008l2.479 3.008zM19.238 8H4.767a.761.761 0 0 0-.762.777v9.42c.001.444.343.803.762.803h14.471c.42 0 .762-.359.762-.803v-9.42A.761.761 0 0 0 19.238 8M18 17H6v-2l1.984-4.018l2.768 3.436l2.598-2.662l3.338-1.205L18 14z"})]),a("div",{class:"ml-1 font-semibold"},"Media Library")],-1),Q=a("div",{class:"mb-3 text-lg font-medium my-1"},"Konten",-1),W={key:0,class:"capitalize"},X={data(){return{image:null,renderRichEditor:!1,openMediaLibrary:!1,data:null,today:new Date().toISOString().slice(0,10),menuDate:!1,date:null,moment:I,form:{title:null,description:null,content:null,location:null,date:null,thumbnail:null},loading:!1,toast:!1}},async mounted(){this.renderRichEditor=!0},methods:{formatDate(){this.form.date=this.moment(this.date).format("YYYY-MM-DD")},async addAnnouncement(){const{valid:s}=await this.$refs.form.validate();if(s){if(!this.form.thumbnail){this.toast=!0;return}this.loading=!0,this.form.content=this.data,this.form.slug=z(this.form.title),await $fetch(this.$config.public.API_PUBLIC_URL+"/api/activities",{method:"POST",headers:{Authorization:"Bearer "+O().token},body:this.form}),this.loading=!1,this.$router.push("/dashboard/activities")}},contentChange(s){this.data=s},onImageSelected(s){this.form.thumbnail=s}}},le=Object.assign(X,{__name:"add",setup(s){return U({title:"Tambah Kegiatan"}),(e,o)=>{const r=i("v-btn"),_=i("v-snackbar"),g=M,f=i("v-text-field"),c=i("v-textarea"),b=i("v-date-picker"),w=i("v-menu"),k=i("v-form"),V=i("v-img"),y=F,C=B;return d(),u(D,null,[n(_,{modelValue:e.toast,"onUpdate:modelValue":o[1]||(o[1]=t=>e.toast=t),color:"red",timeout:3e3},{actions:l(()=>[n(r,{color:"white",variant:"text",onClick:o[0]||(o[0]=t=>e.toastUnauthorized=!1)},{default:l(()=>[v(" Tutup ")]),_:1})]),default:l(()=>[v(" Thumbnail wajib diisi! ")]),_:1},8,["modelValue"]),n(g,{onOnImageSelected:e.onImageSelected,onOnCloseModal:o[2]||(o[2]=t=>e.openMediaLibrary=!1),open:e.openMediaLibrary},null,8,["onOnImageSelected","open"]),a("div",K,[a("div",A,[a("div",E,[H,n(k,{ref:"form"},{default:l(()=>[a("div",N,[a("div",R,[n(f,{rules:[t=>!!t||"Field is required"],modelValue:e.form.title,"onUpdate:modelValue":o[3]||(o[3]=t=>e.form.title=t),variant:"outlined","hide-details":"auto",label:"Judul Kegiatan"},null,8,["rules","modelValue"])]),a("div",q,[n(c,{"auto-grow":"",rules:[t=>!!t||"Field is required"],rows:"3",variant:"outlined",label:"Deskripsi Kegiatan",clearable:"",modelValue:e.form.description,"onUpdate:modelValue":o[4]||(o[4]=t=>e.form.description=t)},null,8,["rules","modelValue"])]),a("div",null,[n(c,{"auto-grow":"",rules:[t=>!!t||"Field is required"],rows:"3",variant:"outlined",label:"Lokasi",clearable:"",modelValue:e.form.location,"onUpdate:modelValue":o[5]||(o[5]=t=>e.form.location=t)},null,8,["rules","modelValue"])]),a("div",null,[n(w,{modelValue:e.menuDate,"onUpdate:modelValue":o[8]||(o[8]=t=>e.menuDate=t),transition:"slide-y-transition"},{activator:l(({props:t})=>[n(f,T({clearable:""},t,{rules:[m=>!!m||"Field is required"],modelValue:e.form.date,"onUpdate:modelValue":o[6]||(o[6]=m=>e.form.date=m),variant:"outlined","hide-details":"auto",label:"Tanggal Kegiatan"}),null,16,["rules","modelValue"])]),default:l(()=>[n(b,{modelValue:e.date,"onUpdate:modelValue":[o[7]||(o[7]=t=>e.date=t),e.formatDate],min:e.today,label:"Select a date"},null,8,["modelValue","onUpdate:modelValue","min"])]),_:1},8,["modelValue"])])])]),_:1},512),P,e.form.thumbnail?(d(),u("div",Y,[n(V,{src:e.form.thumbnail,width:"300"},null,8,["src"]),a("div",{onClick:o[9]||(o[9]=t=>e.form.thumbnail=null),class:"absolute cursor-pointer right-3 top-3 z-50"},J)])):p("",!0),a("div",Z,[n(r,{onClick:o[10]||(o[10]=t=>e.openMediaLibrary=!0),color:"#10B981",class:"flex-none text-white px-3"},{default:l(()=>[G]),_:1})]),Q,e.renderRichEditor?(d(),h(y,{key:1,data:e.data,onContentChange:e.contentChange},null,8,["data","onContentChange"])):p("",!0),n(r,{onClick:e.addAnnouncement,color:"#10B981",class:"mt-5 text-white px-3 py-2"},{default:l(()=>[e.loading?(d(),h(C,{key:1})):(d(),u("span",W,"Submit"))]),_:1},8,["onClick"])])])])],64)}}});export{le as default};
