import{_ as k}from"./MediaLibrary.cf4cfe1e.js";import{_ as w}from"./RichEditor.e135f505.js";import{_ as C}from"./Loader.2f484b9d.js";import{u as y,c as d,b as s,a as e,w as r,F as L,d as j,r as n,o as l,f as c,l as f}from"./entry.287ce2af.js";import{c as $}from"./createSlug.32ba2e5c.js";const M={class:"grid animate-fade"},V={class:"col-12"},B={class:"card"},P=e("h3",{class:"text-2xl font-medium mb-5"},"Edit Perangkat Desa",-1),I={class:"grid grid-cols-1 gap-3"},S={class:"col-span-1"},N={class:"col-span-1 mt-3"},U={class:"mt-3"},E=e("div",{class:"mb-3 text-lg font-medium my-1"},"Visi & Misi",-1),R={key:1,class:"relative w-fit mt-4"},z=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1.5em",height:"1.5em",viewBox:"0 0 48 48"},[e("defs",null,[e("mask",{id:"ipSCloseOne0"},[e("g",{fill:"none","stroke-linejoin":"round","stroke-width":"4"},[e("path",{fill:"#fff",stroke:"#fff",d:"M24 44c11.046 0 20-8.954 20-20S35.046 4 24 4S4 12.954 4 24s8.954 20 20 20Z"}),e("path",{stroke:"#000","stroke-linecap":"round",d:"M29.657 18.343L18.343 29.657m0-11.314l11.314 11.314"})])])]),e("path",{fill:"#10B981",d:"M0 0h48v48H0z",mask:"url(#ipSCloseOne0)"})],-1),A=[z],H={class:"my-1"},O=e("div",{class:"flex items-center"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1.3em",height:"1.3em",viewBox:"0 0 20 20"},[e("path",{fill:"white",d:"M17.125 6.17L15.079.535c-.151-.416-.595-.637-.989-.492L.492 5.006c-.394.144-.593.597-.441 1.013l2.156 5.941V8.777c0-1.438 1.148-2.607 2.56-2.607H8.36l4.285-3.008l2.479 3.008zM19.238 8H4.767a.761.761 0 0 0-.762.777v9.42c.001.444.343.803.762.803h14.471c.42 0 .762-.359.762-.803v-9.42A.761.761 0 0 0 19.238 8M18 17H6v-2l1.984-4.018l2.768 3.436l2.598-2.662l3.338-1.205L18 14z"})]),e("div",{class:"ml-1 font-semibold"},"Media Library")],-1),q={key:0,class:"capitalize"},F={data(){return{openMediaLibrary:!1,image:null,renderRichEditor:!1,data:null,form:{name:null,job:null,job_id:null,image:null,slug:null,nip:null,visi:null},loading:!1,jabatan:[],jabatanName:[]}},async mounted(){await this.loadJabatan();const i=await $fetch(this.$config.public.API_PUBLIC_URL+"/api/perangkat-desa/"+this.$route.query.id);this.form=i,this.renderRichEditor=!0},methods:{async loadJabatan(){this.jabatan=await $fetch(this.$config.public.API_PUBLIC_URL+"/api/jabatan"),this.jabatanName=this.jabatan.map(i=>i.name)},async updatePerangkat(){const{valid:i}=await this.$refs.form.validate();i&&(this.form.job_id=this.jabatan.filter(t=>t.name==this.form.job)[0].uuid,this.form.slug=$(this.form.name),this.loading=!0,await $fetch(this.$config.public.API_PUBLIC_URL+"/api/perangkat-desa/"+this.$route.query.id,{method:"PATCH",headers:{Authorization:"Bearer "+j().token},body:this.form}),this.loading=!1,this.$router.push("/dashboard/perangkat-desa"))},contentChange(i){this.form.visi=i},onImageSelected(i){this.form.image=i}}},G=Object.assign(F,{__name:"edit",setup(i){return y({title:"Edit Perangkat Desa"}),(t,a)=>{const h=k,m=n("v-text-field"),p=n("v-select"),_=w,g=n("v-img"),u=n("v-btn"),v=n("v-form"),b=C;return l(),d(L,null,[s(h,{onOnImageSelected:t.onImageSelected,onOnCloseModal:a[0]||(a[0]=o=>t.openMediaLibrary=!1),open:t.openMediaLibrary},null,8,["onOnImageSelected","open"]),e("div",M,[e("div",V,[e("div",B,[P,s(v,{ref:"form"},{default:r(()=>[e("div",I,[e("div",S,[s(m,{rules:[o=>!!o||"Field is required"],modelValue:t.form.name,"onUpdate:modelValue":a[1]||(a[1]=o=>t.form.name=o),variant:"outlined","hide-details":"auto",label:"Nama"},null,8,["rules","modelValue"])]),e("div",N,[s(m,{modelValue:t.form.nip,"onUpdate:modelValue":a[2]||(a[2]=o=>t.form.nip=o),variant:"outlined","hide-details":"auto",label:"NIP (Nomor Identitas Pegawai)"},null,8,["modelValue"])]),e("div",U,[s(p,{rules:[o=>!!o||"Field is required"],modelValue:t.form.job,"onUpdate:modelValue":a[3]||(a[3]=o=>t.form.job=o),items:t.jabatanName,variant:"outlined","hide-details":"auto",label:"Jabatan"},null,8,["rules","modelValue","items"])]),E,t.renderRichEditor?(l(),c(_,{key:0,data:t.form.visi,onContentChange:t.contentChange},null,8,["data","onContentChange"])):f("",!0),t.form.image?(l(),d("div",R,[s(g,{src:t.form.image,width:"300"},null,8,["src"]),e("div",{onClick:a[4]||(a[4]=o=>t.form.image=null),class:"absolute cursor-pointer right-3 top-3 z-50"},A)])):f("",!0),e("div",H,[s(u,{onClick:a[5]||(a[5]=o=>t.openMediaLibrary=!0),color:"#10B981",class:"flex-none text-white px-3"},{default:r(()=>[O]),_:1})])])]),_:1},512),s(u,{onClick:t.updatePerangkat,color:"#10B981",class:"mt-5 text-white px-3 py-2"},{default:r(()=>[t.loading?(l(),c(b,{key:1})):(l(),d("span",q,"Submit"))]),_:1},8,["onClick"])])])])],64)}}});export{G as default};
