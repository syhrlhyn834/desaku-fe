import{H as b,T as x}from"./components.b6571e0f.js";import{c as C,_ as v}from"./RichEditor.client.dca5e980.js";import{_ as y}from"./Loader.4a72f7fc.js";import{_ as k,d as V,c as r,b as o,w as s,a as n,f as m,l as P,F as B,r as u,o as l,e as T}from"./entry.7bd8cb73.js";import{c as U}from"./createSlug.32ba2e5c.js";const w=C(v),R={data(){return{modalRemoveThumbnail:!1,data:null,image:null,renderRichEditor:!1,thumbnailDeleted:!1,loading:!1,form:{title:null,category:null,description:null,content:null,thumbnail:null,slug:null}}},async mounted(){const t=await $fetch(this.$config.public.API_PUBLIC_URL+"/api/announcement/"+this.$route.query.id);this.form=t,this.data=t.content,this.renderRichEditor=!0},methods:{async updateAnnouncement(){if(this.loading=!0,this.thumbnailDeleted){let t=await this.uploadThumbnail();this.form.thumbnail=t}this.form.content=this.data,this.form.slug=U(this.form.title),await $fetch(this.$config.public.API_PUBLIC_URL+"/api/announcement/"+this.$route.query.id,{method:"PATCH",headers:{Authorization:"Bearer "+V().token},body:this.form}),this.loading=!1,this.$router.push("/dashboard/announcement")},contentChange(t){this.data=t}}},A={class:"grid animate-fade"},E={class:"col-12"},I={class:"card"},L=n("h3",{class:"text-2xl font-medium mb-5"},"Ubah Pengumuman",-1),H={class:"mb-8"},N={class:"mb-8"},D=n("div",{class:"mb-3 text-lg font-medium my-1"},"Konten",-1),q={key:0,class:"capitalize"};function z(t,a,F,$,e,d){const _=x,h=b,c=u("v-text-field"),f=w,p=y,g=u("v-btn");return l(),r(B,null,[o(h,null,{default:s(()=>[o(_,null,{default:s(()=>[T("Edit Pengumuman")]),_:1})]),_:1}),n("div",A,[n("div",E,[n("div",I,[L,n("div",H,[o(c,{modelValue:e.form.title,"onUpdate:modelValue":a[0]||(a[0]=i=>e.form.title=i),variant:"outlined","hide-details":"auto",label:"Judul Pengumuman"},null,8,["modelValue"])]),n("div",N,[o(c,{modelValue:e.form.description,"onUpdate:modelValue":a[1]||(a[1]=i=>e.form.description=i),variant:"outlined","hide-details":"auto",label:"Deksripsi Pengumuman"},null,8,["modelValue"])]),D,e.renderRichEditor?(l(),m(f,{key:0,data:e.data,onContentChange:d.contentChange},null,8,["data","onContentChange"])):P("",!0),o(g,{onClick:d.updateAnnouncement,color:"#10B981",class:"mt-5 text-white px-3 py-2"},{default:s(()=>[e.loading?(l(),m(p,{key:1})):(l(),r("span",q,"Ubah"))]),_:1},8,["onClick"])])])])],64)}const G=k(R,[["render",z]]);export{G as default};
