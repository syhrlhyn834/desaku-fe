import w from"./button.esm.4580e9d5.js";import{c as y,_ as C}from"./RichEditor.client.1206b165.js";import{_ as T}from"./Loader.cf9316a5.js";import{$ as V,b as d,l,w as m,i as e,e as u,c as r,F as x,r as i,o as s,a6 as R}from"./entry.72fda17e.js";import{c as S}from"./createSlug.32ba2e5c.js";import"./badge.esm.30cdc01e.js";import"./basecomponent.esm.ab37b9a2.js";import"./index.esm.18136670.js";import"./baseicon.esm.1ec973c5.js";const B=y(C),E={class:"flex items-center justify-between"},P=e("div",{class:"text-xl font-semibold"},[e("span",null,"Hapus Thumbnail?")],-1),$=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"2em",height:"2em",viewBox:"0 0 24 24"},[e("g",{fill:"none",stroke:"black","stroke-width":"1.5"},[e("circle",{cx:"12",cy:"12",r:"10"}),e("path",{"stroke-linecap":"round",d:"m14.5 9.5l-5 5m0-5l5 5"})])],-1),U=[$],D=e("div",null,[e("span",null,"Thumbnail akan dihapus dari server, apakah anda yakin untuk menghapusnya?")],-1),N={class:"w-full flex justify-end"},O={class:"grid"},A={class:"col-12"},j={class:"card"},F=e("h3",{class:"text-2xl font-medium mb-5"},"Tambah Pengumuman",-1),H={class:"grid grid-cols-1 gap-3"},L={class:"col-span-1"},M={class:"mt-5"},z=e("div",{class:"mb-3 text-lg font-medium my-1"},"Thumbnail Pengumuman",-1),J={key:0,class:"relative w-fit"},K=R('<svg xmlns="http://www.w3.org/2000/svg" width="1.5em" height="1.5em" viewBox="0 0 48 48"><defs><mask id="ipSCloseOne0"><g fill="none" stroke-linejoin="round" stroke-width="4"><path fill="#fff" stroke="#fff" d="M24 44c11.046 0 20-8.954 20-20S35.046 4 24 4S4 12.954 4 24s8.954 20 20 20Z"></path><path stroke="#000" stroke-linecap="round" d="M29.657 18.343L18.343 29.657m0-11.314l11.314 11.314"></path></g></mask></defs><path fill="#A3A3A3" d="M0 0h48v48H0z" mask="url(#ipSCloseOne0)"></path></svg>',1),Z=[K],q={class:"mb-2 mt-6"},G=e("div",{class:"mb-3 text-lg font-medium my-1"},"Konten",-1),I={key:0},Q={data(){return{modalRemoveThumbnail:!1,image:null,categories:[],renderRichEditor:!1,thumbnailDeleted:!1,thumbnailUploaded:!1,data:null,form:{title:null,description:null,content:null,thumbnail:null},headers:[{title:"Title",align:"start",sortable:!1,key:"title"},{title:"Content",align:"end",key:"content"}],items:[],loading:!1}},async mounted(){this.renderRichEditor=!0},methods:{async addAnnouncement(){this.loading=!0,this.form.content=this.data,this.form.thumbnail=await this.uploadThumbnail(),this.form.slug=S(this.form.title),await $fetch("http://api.desaku.muhichsan.com/api/announcement",{method:"POST",body:this.form}),this.loading=!1,this.$router.push("/dashboard/announcement")},contentChange(n){this.data=n},async uploadThumbnail(){const n=new FormData;return n.append("image",this.form.thumbnail),(await $fetch("http://api.desaku.muhichsan.com/api/image",{body:n,method:"POST"})).data},async removeThumbnailNews(){let n=this.form.thumbnail.replace("http://api.desaku.muhichsan.com/storage/","");await $fetch("http://api.desaku.muhichsan.com/api/image/"+n,{method:"DELETE"}),this.thumbnailDeleted=!0,this.modalRemoveThumbnail=!1}}},ie=Object.assign(Q,{__name:"add",setup(n){return V({title:"Tambah Pengumuman"}),(t,a)=>{const h=w,c=i("v-card"),p=i("v-dialog"),f=i("v-text-field"),_=i("v-textarea"),b=i("v-img"),g=i("v-file-input"),v=B,k=T;return s(),d(x,null,[l(p,{modelValue:t.modalRemoveThumbnail,"onUpdate:modelValue":a[1]||(a[1]=o=>t.modalRemoveThumbnail=o),width:"auto"},{default:m(()=>[l(c,{height:"auto",style:{"scrollbar-width":"none"}},{title:m(()=>[e("div",E,[P,e("div",{onClick:a[0]||(a[0]=o=>t.modalRemoveThumbnail=!1),class:"cursor-pointer"},U)])]),text:m(()=>[D]),actions:m(()=>[e("div",N,[l(h,{onClick:t.removeThumbnailNews,class:"w-fit mt-6 bg-[#FC4100] text-white px-3 mx-1 mb-2 py-2 text-md",label:"Hapus"},null,8,["onClick"])])]),_:1})]),_:1},8,["modelValue"]),e("div",O,[e("div",A,[e("div",j,[F,e("div",H,[e("div",L,[l(f,{modelValue:t.form.title,"onUpdate:modelValue":a[2]||(a[2]=o=>t.form.title=o),variant:"outlined","hide-details":"auto",label:"Judul Pengumuman"},null,8,["modelValue"])])]),e("div",M,[l(_,{rows:"3",variant:"outlined",label:"Deskripsi Pengumuman",clearable:"",modelValue:t.form.description,"onUpdate:modelValue":a[3]||(a[3]=o=>t.form.description=o)},null,8,["modelValue"])]),z,t.thumbnailUploaded?(s(),d("div",J,[l(b,{src:t.form.thumbnail,width:"300"},null,8,["src"]),e("div",{onClick:a[4]||(a[4]=o=>t.modalRemoveThumbnail=!0),class:"absolute cursor-pointer right-3 top-3 z-50"},Z)])):u("",!0),e("div",q,[t.thumbnailUploaded?u("",!0):(s(),r(g,{key:0,clearable:!1,modelValue:t.form.thumbnail,"onUpdate:modelValue":a[5]||(a[5]=o=>t.form.thumbnail=o),label:"Thumbnail Pengumuman",variant:"outlined"},null,8,["modelValue"]))]),G,t.renderRichEditor?(s(),r(v,{key:1,data:t.data,onContentChange:t.contentChange},null,8,["data","onContentChange"])):u("",!0),l(h,{onClick:t.addAnnouncement,class:"mt-5 bg-[#10B981] text-white px-3 py-2",label:"Submit"},{default:m(()=>[t.loading?(s(),r(k,{key:1})):(s(),d("span",I,"Submit"))]),_:1},8,["onClick"])])])])],64)}}});export{ie as default};
