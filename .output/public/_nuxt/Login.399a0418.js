import{_ as g}from"./Loader.5585e6b0.js";import{_ as k,u as v,c as i,b as d,w as l,a as s,F as b,g as h,r as u,o as n,d as m,e as y,p as C,f as U}from"./entry.35206c58.js";const r=a=>(C("data-v-1fc64cab"),a=a(),U(),a),L={class:"bg-[#F8FAFC] flex items-center justify-center min-h-screen min-w-screen overflow-hidden"},x={class:"w-[85%] md:w-[400px] flex flex-column align-items-center justify-center"},P=["src"],V={class:"bg-white px-8",style:{"border-radius":"36px",padding:"0.3rem",background:"linear-gradient(180deg, #0088CC 10%, rgba(33, 150, 243, 0) 30%)"}},$={class:"w-full surface-card py-8 px-5 sm:px-8",style:{"border-radius":"53px"}},B=r(()=>s("div",{class:"text-center mb-5 text-white"},[s("div",{class:"text-900 text-2xl font-medium mb-3"},"Welcome Back!"),s("span",{class:"text-600 font-medium"},"Sign in to continue")],-1)),F={class:"mt-12"},I=r(()=>s("label",{for:"password1",class:"block text-900 font-medium text-lg mb-4"},"Email",-1)),S=r(()=>s("label",{for:"password1",class:"block text-900 font-medium text-lg my-4"},"Password",-1)),z=r(()=>s("path",{fill:"black",d:"M12 9a3 3 0 0 0-3 3a3 3 0 0 0 3 3a3 3 0 0 0 3-3a3 3 0 0 0-3-3m0 8a5 5 0 0 1-5-5a5 5 0 0 1 5-5a5 5 0 0 1 5 5a5 5 0 0 1-5 5m0-12.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5"},null,-1)),R=[z],A=r(()=>s("path",{fill:"black",d:"M11.83 9L15 12.16V12a3 3 0 0 0-3-3zm-4.3.8l1.55 1.55c-.05.21-.08.42-.08.65a3 3 0 0 0 3 3c.22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53a5 5 0 0 1-5-5c0-.79.2-1.53.53-2.2M2 4.27l2.28 2.28l.45.45C3.08 8.3 1.78 10 1 12c1.73 4.39 6 7.5 11 7.5c1.55 0 3.03-.3 4.38-.84l.43.42L19.73 22L21 20.73L3.27 3M12 7a5 5 0 0 1 5 5c0 .64-.13 1.26-.36 1.82l2.93 2.93c1.5-1.25 2.7-2.89 3.43-4.75c-1.73-4.39-6-7.5-11-7.5c-1.4 0-2.74.25-4 .7l2.17 2.15C10.74 7.13 11.35 7 12 7"},null,-1)),N=[A],T={class:"mt-3"},E=r(()=>s("span",null,"Lupa password?",-1)),M={key:0},j={key:1},O={key:1,class:"ml-1 font-medium"},q={key:0},D={data(){return{logo:null,loading:!1,loadingReset:!1,showPassword:!1,emailSend:!1,form:{email:null,password:null},toastUnauthorized:!1,toastUserNotFound:!1}},async mounted(){this.logo=(await $fetch(this.$config.public.API_PUBLIC_URL+"/api/header")).logo,document.addEventListener("keydown",async a=>{(a.key==="Enter"||a.keyCode===13)&&await this.login()})},methods:{async login(){this.loading=!0,this.form.content=this.data;const{valid:a}=await this.$refs.form.validate();if(a)try{const e=await $fetch(this.$config.public.API_PUBLIC_URL+"/api/auth/login",{method:"POST",headers:{Authorization:"Bearer "+h().token},body:this.form});h().token=e.token,this.loading=!1,location.href="/dashboard"}catch{this.toastUnauthorized=!0,this.loading=!1}},async resetPassword(){try{this.loadingReset=!0,await $fetch(this.$config.public.API_PUBLIC_URL+"/api/reset-password",{method:"POST",body:this.form}),this.emailSend=!0}catch{this.toastUserNotFound=!0}this.loadingReset=!1}}},H=Object.assign(D,{__name:"Login",setup(a){return v({title:"Login - Desaku"}),(e,t)=>{const c=u("v-btn"),p=u("v-snackbar"),f=u("v-text-field"),w=g,_=u("v-form");return n(),i(b,null,[d(p,{modelValue:e.toastUnauthorized,"onUpdate:modelValue":t[1]||(t[1]=o=>e.toastUnauthorized=o),color:"red",timeout:3e3},{actions:l(()=>[d(c,{color:"white",variant:"text",onClick:t[0]||(t[0]=o=>e.toastUnauthorized=!1)},{default:l(()=>[m(" Tutup ")]),_:1})]),default:l(()=>[m(" User tidak ditemukan atau password salah! ")]),_:1},8,["modelValue"]),d(p,{modelValue:e.toastUserNotFound,"onUpdate:modelValue":t[3]||(t[3]=o=>e.toastUserNotFound=o),color:"red",timeout:3e3},{actions:l(()=>[d(c,{color:"white",variant:"text",onClick:t[2]||(t[2]=o=>e.toastUnauthorized=!1)},{default:l(()=>[m(" Tutup ")]),_:1})]),default:l(()=>[m(" User tidak ditemukan! ")]),_:1},8,["modelValue"]),s("div",L,[s("div",x,[s("img",{onClick:t[4]||(t[4]=o=>e.$router.push("/")),class:"cursor-pointer w-[100px] mb-6 mx-auto",src:e.logo,alt:"App logo"},null,8,P),s("div",V,[s("div",$,[B,d(_,{ref:"form"},{default:l(()=>[s("div",F,[I,d(f,{rules:[o=>!!o||"Field is required"],type:"email",modelValue:e.form.email,"onUpdate:modelValue":t[5]||(t[5]=o=>e.form.email=o),dense:"",variant:"outlined","hide-details":"auto",label:"Alamat Email"},null,8,["rules","modelValue"]),S,d(f,{rules:[o=>!!o||"Field is required"],type:e.showPassword?"text":"password",modelValue:e.form.password,"onUpdate:modelValue":t[8]||(t[8]=o=>e.form.password=o),dense:"",variant:"outlined","hide-details":"auto",label:"Kata Sandi"},{"append-inner":l(()=>[e.showPassword?(n(),i("svg",{key:1,class:"cursor-pointer",onClick:t[7]||(t[7]=o=>e.showPassword=!1),xmlns:"http://www.w3.org/2000/svg",width:"1.5em",height:"1.5em",viewBox:"0 0 24 24"},N)):(n(),i("svg",{key:0,class:"cursor-pointer",onClick:t[6]||(t[6]=o=>e.showPassword=!0),xmlns:"http://www.w3.org/2000/svg",width:"1.5em",height:"1.5em",viewBox:"0 0 24 24"},R))]),_:1},8,["rules","type","modelValue"]),s("div",T,[E,e.emailSend?(n(),i("span",O," Link sudah terkirim! ")):(n(),i("span",{key:0,onClick:t[9]||(t[9]=(...o)=>e.resetPassword&&e.resetPassword(...o)),class:"cursor-pointer ml-1 font-medium"},[e.loadingReset?(n(),i("span",j,"Mengirim...")):(n(),i("span",M,"Reset"))]))]),d(c,{elevation:"0",onClick:e.login,color:"#0088CC","text-color":"white",class:"w-full mt-5 text-white px-3 py-2"},{default:l(()=>[e.loading?(n(),y(w,{key:1})):(n(),i("span",q,"Login"))]),_:1},8,["onClick"])])]),_:1},512)])])])])],64)}}}),G=k(H,[["__scopeId","data-v-1fc64cab"]]);export{G as default};
