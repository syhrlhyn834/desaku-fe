import{H as b,T as v}from"./components.ca39fc16.js";import{_ as C}from"./RichEditor.e135f505.js";import{_ as x}from"./Loader.2f484b9d.js";import{_ as k,d as y,c as r,b as o,w as s,a as n,f as c,l as V,F as P,r as u,o as i,e as B}from"./entry.287ce2af.js";import{c as T}from"./createSlug.32ba2e5c.js";const U={data(){return{modalRemoveThumbnail:!1,data:null,image:null,renderRichEditor:!1,thumbnailDeleted:!1,loading:!1,form:{title:null,category:null,description:null,content:null,thumbnail:null,slug:null}}},async mounted(){const t=await $fetch(this.$config.public.API_PUBLIC_URL+"/api/announcement/"+this.$route.query.id);this.form=t,this.data=t.content,this.renderRichEditor=!0},methods:{async updateAnnouncement(){if(this.loading=!0,this.thumbnailDeleted){let t=await this.uploadThumbnail();this.form.thumbnail=t}this.form.content=this.data,this.form.slug=T(this.form.title),await $fetch(this.$config.public.API_PUBLIC_URL+"/api/announcement/"+this.$route.query.id,{method:"PATCH",headers:{Authorization:"Bearer "+y().token},body:this.form}),this.loading=!1,this.$router.push("/dashboard/announcement")},contentChange(t){this.data=t}}},R={class:"grid animate-fade"},w={class:"col-12"},A={class:"card"},E=n("h3",{class:"text-2xl font-medium mb-5"},"Ubah Pengumuman",-1),I={class:"mb-8"},L={class:"mb-8"},H=n("div",{class:"mb-3 text-lg font-medium my-1"},"Konten",-1),N={key:0,class:"capitalize"};function D(t,a,$,q,e,d){const h=v,_=b,m=u("v-text-field"),f=C,p=x,g=u("v-btn");return i(),r(P,null,[o(_,null,{default:s(()=>[o(h,null,{default:s(()=>[B("Edit Pengumuman")]),_:1})]),_:1}),n("div",R,[n("div",w,[n("div",A,[E,n("div",I,[o(m,{modelValue:e.form.title,"onUpdate:modelValue":a[0]||(a[0]=l=>e.form.title=l),variant:"outlined","hide-details":"auto",label:"Judul Pengumuman"},null,8,["modelValue"])]),n("div",L,[o(m,{modelValue:e.form.description,"onUpdate:modelValue":a[1]||(a[1]=l=>e.form.description=l),variant:"outlined","hide-details":"auto",label:"Deksripsi Pengumuman"},null,8,["modelValue"])]),H,e.renderRichEditor?(i(),c(f,{key:0,data:e.data,onContentChange:d.contentChange},null,8,["data","onContentChange"])):V("",!0),o(g,{onClick:d.updateAnnouncement,color:"#10B981",class:"mt-5 text-white px-3 py-2"},{default:s(()=>[e.loading?(i(),c(p,{key:1})):(i(),r("span",N,"Ubah"))]),_:1},8,["onClick"])])])])],64)}const j=k(U,[["render",D]]);export{j as default};
