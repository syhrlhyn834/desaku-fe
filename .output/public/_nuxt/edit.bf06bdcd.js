import{_ as y}from"./MediaLibrary.d0f72a79.js";import C from"./button.esm.de118b49.js";import{c as B,_ as V}from"./RichEditor.client.1608168f.js";import{_ as x}from"./Loader.8f366148.js";import{$ as M,b as m,l as s,w as i,i as e,e as c,c as h,F as $,r as l,o as d,a2 as L}from"./entry.ad1a8891.js";import"./badge.esm.a8bb659d.js";import"./basecomponent.esm.1e1342cd.js";import"./index.esm.cdfd46e0.js";import"./baseicon.esm.2538c2f4.js";const S=B(V),T={class:"flex items-center justify-between"},H=e("div",{class:"text-xl font-semibold"},[e("span",null,"Hapus Thumbnail?")],-1),R=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"2em",height:"2em",viewBox:"0 0 24 24"},[e("g",{fill:"none",stroke:"black","stroke-width":"1.5"},[e("circle",{cx:"12",cy:"12",r:"10"}),e("path",{"stroke-linecap":"round",d:"m14.5 9.5l-5 5m0-5l5 5"})])],-1),N=[R],O=e("div",null,[e("span",null,"Thumbnail akan dihapus dari server, apakah anda yakin untuk menghapusnya?")],-1),E={class:"w-full flex justify-end"},U={class:"grid"},j={class:"col-12"},z={class:"card"},I=e("h3",{class:"text-2xl font-medium mb-5"},"Ubah Berita",-1),F={class:"mb-8"},q={class:"mb-2"},A=e("div",{class:"mb-3 text-lg font-medium my-1"},"Thumbnail Berita",-1),K={key:0,class:"relative w-fit"},D=L('<svg xmlns="http://www.w3.org/2000/svg" width="1.5em" height="1.5em" viewBox="0 0 48 48"><defs><mask id="ipSCloseOne0"><g fill="none" stroke-linejoin="round" stroke-width="4"><path fill="#fff" stroke="#fff" d="M24 44c11.046 0 20-8.954 20-20S35.046 4 24 4S4 12.954 4 24s8.954 20 20 20Z"></path><path stroke="#000" stroke-linecap="round" d="M29.657 18.343L18.343 29.657m0-11.314l11.314 11.314"></path></g></mask></defs><path fill="#10B981" d="M0 0h48v48H0z" mask="url(#ipSCloseOne0)"></path></svg>',1),J=[D],P={class:"mb-6 mt-6"},Z=e("div",{class:"flex items-center"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1.3em",height:"1.3em",viewBox:"0 0 20 20"},[e("path",{fill:"white",d:"M17.125 6.17L15.079.535c-.151-.416-.595-.637-.989-.492L.492 5.006c-.394.144-.593.597-.441 1.013l2.156 5.941V8.777c0-1.438 1.148-2.607 2.56-2.607H8.36l4.285-3.008l2.479 3.008zM19.238 8H4.767a.761.761 0 0 0-.762.777v9.42c.001.444.343.803.762.803h14.471c.42 0 .762-.359.762-.803v-9.42A.761.761 0 0 0 19.238 8M18 17H6v-2l1.984-4.018l2.768 3.436l2.598-2.662l3.338-1.205L18 14z"})]),e("div",{class:"ml-1 font-semibold"},"Media Library")],-1),G=e("div",{class:"mb-3 text-lg font-medium my-1"},"Konten",-1),Q={key:0},W={data(){return{modalRemoveThumbnail:!1,data:null,image:null,loading:null,categories:[],renderRichEditor:!1,thumbnailDeleted:!1,form:{title:null,category:null,content:null,thumbnail:""},openMediaLibrary:!1}},async mounted(){await this.loadCategories();const a=await $fetch("http://api.desaku.muhichsan.com/api/news/"+this.$route.query.id);this.form=a,this.data=a.content,this.renderRichEditor=!0},methods:{async loadCategories(){const a=await $fetch("http://api.desaku.muhichsan.com/api/news-category/");this.categories=a.map(t=>t.name)},async updateNews(){this.loading=!0,this.form.content=this.data,await $fetch("http://api.desaku.muhichsan.com/api/news/"+this.$route.query.id,{method:"PATCH",body:this.form}),this.loading=!1,this.$router.push("/dashboard/news")},contentChange(a){this.data=a},onImageSelected(a){this.form.thumbnail=a}}},le=Object.assign(W,{__name:"edit",setup(a){return M({title:"Edit Berita"}),(t,o)=>{const u=y,r=C,p=l("v-card"),_=l("v-dialog"),f=l("v-text-field"),v=l("v-select"),g=l("v-img"),b=l("v-btn"),w=S,k=x;return d(),m($,null,[s(u,{onOnImageSelected:t.onImageSelected,onOnCloseModal:o[0]||(o[0]=n=>t.openMediaLibrary=!1),open:t.openMediaLibrary},null,8,["onOnImageSelected","open"]),s(_,{modelValue:t.modalRemoveThumbnail,"onUpdate:modelValue":o[2]||(o[2]=n=>t.modalRemoveThumbnail=n),width:"auto"},{default:i(()=>[s(p,{height:"auto",style:{"scrollbar-width":"none"}},{title:i(()=>[e("div",T,[H,e("div",{onClick:o[1]||(o[1]=n=>t.modalRemoveThumbnail=!1),class:"cursor-pointer"},N)])]),text:i(()=>[O]),actions:i(()=>[e("div",E,[s(r,{onClick:t.removeThumbnailNews,class:"w-fit mt-6 bg-[#FC4100] text-white px-3 mx-1 mb-2 py-2 text-md",label:"Hapus"},null,8,["onClick"])])]),_:1})]),_:1},8,["modelValue"]),e("div",U,[e("div",j,[e("div",z,[I,e("div",F,[s(f,{modelValue:t.form.title,"onUpdate:modelValue":o[3]||(o[3]=n=>t.form.title=n),variant:"outlined","hide-details":"auto",label:"Judul Berita"},null,8,["modelValue"])]),e("div",q,[s(v,{"item-value":"name","item-text":"name",modelValue:t.form.category,"onUpdate:modelValue":o[4]||(o[4]=n=>t.form.category=n),label:"Kategori Berita",items:t.categories,variant:"outlined"},null,8,["modelValue","items"])]),A,t.form.thumbnail?(d(),m("div",K,[s(g,{src:t.form.thumbnail,width:"300"},null,8,["src"]),e("div",{onClick:o[5]||(o[5]=n=>t.form.thumbnail=null),class:"absolute cursor-pointer right-3 top-3 z-50"},J)])):c("",!0),e("div",P,[s(b,{onClick:o[6]||(o[6]=n=>t.openMediaLibrary=!0),color:"#10B981",class:"flex-none text-white px-3"},{default:i(()=>[Z]),_:1})]),G,t.renderRichEditor?(d(),h(w,{key:1,data:t.data,onContentChange:t.contentChange},null,8,["data","onContentChange"])):c("",!0),s(r,{onClick:t.updateNews,class:"mt-5 bg-[#10B981] text-white px-3 py-2"},{default:i(()=>[t.loading?(d(),h(k,{key:1})):(d(),m("span",Q,"Ubah"))]),_:1},8,["onClick"])])])])],64)}}});export{le as default};
