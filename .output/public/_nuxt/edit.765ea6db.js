import{_ as L}from"./MediaLibrary.e795ca93.js";import{c as U,_ as M}from"./RichEditor.client.3f004869.js";import{_ as $}from"./Loader.762d9a93.js";import{u as B,c as u,b as l,w as i,a as o,F as S,g as D,r as s,o as d,d as h,x as I,m as p,e as v}from"./entry.fa47fe52.js";import{c as O}from"./createSlug.32ba2e5c.js";import{h as T}from"./moment.a9aaa855.js";const z=U(M),A={class:"grid animate-fade"},R={class:"col-12"},q={class:"card"},F=o("h3",{class:"text-2xl font-medium mb-5"},"Ubah Kegiatan",-1),H={class:"mb-8"},K={class:"mt-3"},P=o("div",{class:"mb-3 mt-5 text-lg font-medium my-1"},"Thumbnail",-1),E={key:0,class:"relative w-fit"},N=o("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1.5em",height:"1.5em",viewBox:"0 0 48 48"},[o("defs",null,[o("mask",{id:"ipSCloseOne0"},[o("g",{fill:"none","stroke-linejoin":"round","stroke-width":"4"},[o("path",{fill:"#fff",stroke:"#fff",d:"M24 44c11.046 0 20-8.954 20-20S35.046 4 24 4S4 12.954 4 24s8.954 20 20 20Z"}),o("path",{stroke:"#000","stroke-linecap":"round",d:"M29.657 18.343L18.343 29.657m0-11.314l11.314 11.314"})])])]),o("path",{fill:"#10B981",d:"M0 0h48v48H0z",mask:"url(#ipSCloseOne0)"})],-1),Y=[N],j={class:"mb-6 mt-6"},J=o("div",{class:"flex items-center"},[o("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1.3em",height:"1.3em",viewBox:"0 0 20 20"},[o("path",{fill:"white",d:"M17.125 6.17L15.079.535c-.151-.416-.595-.637-.989-.492L.492 5.006c-.394.144-.593.597-.441 1.013l2.156 5.941V8.777c0-1.438 1.148-2.607 2.56-2.607H8.36l4.285-3.008l2.479 3.008zM19.238 8H4.767a.761.761 0 0 0-.762.777v9.42c.001.444.343.803.762.803h14.471c.42 0 .762-.359.762-.803v-9.42A.761.761 0 0 0 19.238 8M18 17H6v-2l1.984-4.018l2.768 3.436l2.598-2.662l3.338-1.205L18 14z"})]),o("div",{class:"ml-1 font-semibold"},"Media Library")],-1),Z=o("div",{class:"mb-3 text-lg font-medium my-1"},"Konten",-1),G={key:0,class:"capitalize"},Q={data(){return{modalRemoveThumbnail:!1,data:null,image:null,renderRichEditor:!1,thumbnailDeleted:!1,loading:!1,date:null,today:new Date().toISOString().slice(0,10),menuDate:!1,moment:T,form:{title:null,category:null,description:null,content:null,date:null,location:null,thumbnail:null},toast:!1,openMediaLibrary:!1}},async mounted(){const n=await $fetch(this.$config.public.API_PUBLIC_URL+"/api/activities/"+this.$route.query.id);this.form=n,this.data=n.content,this.renderRichEditor=!0},methods:{formatDate(){this.form.date=this.moment(this.date).format("YYYY-MM-DD")},async updateActivity(){const{valid:n}=await this.$refs.form.validate();if(n){if(!this.form.thumbnail){this.toast=!0;return}this.loading=!0,this.form.content=this.data,this.form.slug=O(this.form.title),await $fetch(this.$config.public.API_PUBLIC_URL+"/api/activities/"+this.$route.query.id,{method:"PATCH",headers:{Authorization:"Bearer "+D().token},body:this.form}),this.loading=!1,this.$router.push("/dashboard/activities")}},contentChange(n){this.data=n},onImageSelected(n){this.form.thumbnail=n}}},ae=Object.assign(Q,{__name:"edit",setup(n){return B({title:"Ubah Kegiatan"}),(e,a)=>{const r=s("v-btn"),_=s("v-snackbar"),g=L,f=s("v-text-field"),c=s("v-textarea"),b=s("v-date-picker"),w=s("v-menu"),k=s("v-img"),V=z,y=$,C=s("v-form");return d(),u(S,null,[l(_,{modelValue:e.toast,"onUpdate:modelValue":a[1]||(a[1]=t=>e.toast=t),color:"red",timeout:3e3},{actions:i(()=>[l(r,{color:"white",variant:"text",onClick:a[0]||(a[0]=t=>e.toastUnauthorized=!1)},{default:i(()=>[h(" Tutup ")]),_:1})]),default:i(()=>[h(" Thumbnail wajib diisi! ")]),_:1},8,["modelValue"]),l(g,{onOnImageSelected:e.onImageSelected,onOnCloseModal:a[2]||(a[2]=t=>e.openMediaLibrary=!1),open:e.openMediaLibrary},null,8,["onOnImageSelected","open"]),o("div",A,[o("div",R,[l(C,{ref:"form"},{default:i(()=>[o("div",q,[F,o("div",H,[l(f,{rules:[t=>!!t||"Field is required"],modelValue:e.form.title,"onUpdate:modelValue":a[3]||(a[3]=t=>e.form.title=t),variant:"outlined","hide-details":"auto",label:"Judul Kegiatan"},null,8,["rules","modelValue"])]),o("div",K,[l(c,{"auto-grow":"",rules:[t=>!!t||"Field is required"],rows:"3",variant:"outlined",label:"Deskripsi Kegiatan",clearable:"",modelValue:e.form.description,"onUpdate:modelValue":a[4]||(a[4]=t=>e.form.description=t)},null,8,["rules","modelValue"])]),o("div",null,[l(c,{"auto-grow":"",rules:[t=>!!t||"Field is required"],rows:"3",variant:"outlined",label:"Lokasi",clearable:"",modelValue:e.form.location,"onUpdate:modelValue":a[5]||(a[5]=t=>e.form.location=t)},null,8,["rules","modelValue"])]),o("div",null,[l(w,{modelValue:e.menuDate,"onUpdate:modelValue":a[8]||(a[8]=t=>e.menuDate=t),transition:"slide-y-transition"},{activator:i(({props:t})=>[l(f,I({clearable:""},t,{rules:[m=>!!m||"Field is required"],modelValue:e.form.date,"onUpdate:modelValue":a[6]||(a[6]=m=>e.form.date=m),variant:"outlined","hide-details":"auto",label:"Tanggal Kegiatan"}),null,16,["rules","modelValue"])]),default:i(()=>[l(b,{modelValue:e.date,"onUpdate:modelValue":[a[7]||(a[7]=t=>e.date=t),e.formatDate],min:e.today,label:"Select a date"},null,8,["modelValue","onUpdate:modelValue","min"])]),_:1},8,["modelValue"])]),P,e.form.thumbnail?(d(),u("div",E,[l(k,{src:e.form.thumbnail,width:"300"},null,8,["src"]),o("div",{onClick:a[9]||(a[9]=t=>e.form.thumbnail=null),class:"absolute cursor-pointer right-3 top-3 z-50"},Y)])):p("",!0),o("div",j,[l(r,{onClick:a[10]||(a[10]=t=>e.openMediaLibrary=!0),color:"#10B981",class:"flex-none text-white px-3"},{default:i(()=>[J]),_:1})]),Z,e.renderRichEditor?(d(),v(V,{key:1,data:e.data,onContentChange:e.contentChange},null,8,["data","onContentChange"])):p("",!0),l(r,{onClick:e.updateActivity,color:"#10B981",class:"mt-5 text-white px-3 py-2"},{default:i(()=>[e.loading?(d(),v(y,{key:1})):(d(),u("span",G,"Ubah"))]),_:1},8,["onClick"])])]),_:1},512)])])],64)}}});export{ae as default};
