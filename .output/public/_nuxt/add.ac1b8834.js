import x from"./button.esm.42d3b006.js";import{c as C,_ as T}from"./RichEditor.client.9ecbdfc1.js";import{_ as V}from"./Loader.21b59792.js";import{c as B}from"./createSlug.32ba2e5c.js";import{Y as R,b as d,l,w as m,i as e,e as c,c as u,F as E,r as n,o as s,a6 as S}from"./entry.95699424.js";import"./badge.esm.d0e226d1.js";import"./basecomponent.esm.82efc321.js";import"./index.esm.063ab9bc.js";import"./baseicon.esm.5d04c19f.js";const N=C(T),U={data(){return{modalRemoveThumbnail:!1,image:null,categories:[],renderRichEditor:!1,thumbnailDeleted:!1,thumbnailUploaded:!1,data:null,renderRichEditor:!1,form:{title:null,description:null,category:null,slug:null,content:null,thumbnail:null},headers:[{title:"Title",align:"start",sortable:!1,key:"title"},{title:"Category",align:"start",key:"category"},{title:"Content",align:"end",key:"content"}],items:[],loading:!1}},async mounted(){await this.loadCategories();const a=await $fetch("http://127.0.0.1:8000/api/news");this.items=a,this.renderRichEditor=!0},methods:{async loadCategories(){const a=await $fetch("http://127.0.0.1:8000/api/news-category/");this.categories=a.map(o=>o.name)},async addNews(){this.loading=!0,this.form.content=this.data,this.form.thumbnail=await this.uploadThumbnail(),this.form.slug=B(this.form.title),await $fetch("http://127.0.0.1:8000/api/news",{method:"POST",body:this.form}),this.loading=!1,this.$router.push("/dashboard/news")},contentChange(a){this.data=a},async uploadThumbnail(){const a=new FormData;return a.append("image",this.form.thumbnail),(await $fetch("http://127.0.0.1:8000/api/image",{body:a,method:"POST"})).data},async removeThumbnailNews(){let a=this.form.thumbnail.replace("http://127.0.0.1:8000/storage/","");await $fetch("http://127.0.0.1:8000/api/image/"+a,{method:"DELETE"}),this.thumbnailDeleted=!0,this.modalRemoveThumbnail=!1}}},D={class:"flex items-center justify-between"},O=e("div",{class:"text-xl font-semibold"},[e("span",null,"Hapus Thumbnail?")],-1),F=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"2em",height:"2em",viewBox:"0 0 24 24"},[e("g",{fill:"none",stroke:"black","stroke-width":"1.5"},[e("circle",{cx:"12",cy:"12",r:"10"}),e("path",{"stroke-linecap":"round",d:"m14.5 9.5l-5 5m0-5l5 5"})])],-1),j=[F],A=e("div",null,[e("span",null,"Thumbnail akan dihapus dari server, apakah anda yakin untuk menghapusnya?")],-1),H={class:"w-full flex justify-end"},L={class:"grid"},M={class:"col-12"},z={class:"card"},K=e("h3",{class:"text-2xl font-medium mb-5"},"Tambah Berita",-1),P={class:"grid grid-cols-3 gap-3"},J={class:"col-span-2"},Y=e("div",{class:"mb-3 text-lg font-medium my-1"},"Thumbnail Berita",-1),Z={key:0,class:"relative w-fit"},q=S('<svg xmlns="http://www.w3.org/2000/svg" width="1.5em" height="1.5em" viewBox="0 0 48 48"><defs><mask id="ipSCloseOne0"><g fill="none" stroke-linejoin="round" stroke-width="4"><path fill="#fff" stroke="#fff" d="M24 44c11.046 0 20-8.954 20-20S35.046 4 24 4S4 12.954 4 24s8.954 20 20 20Z"></path><path stroke="#000" stroke-linecap="round" d="M29.657 18.343L18.343 29.657m0-11.314l11.314 11.314"></path></g></mask></defs><path fill="#A3A3A3" d="M0 0h48v48H0z" mask="url(#ipSCloseOne0)"></path></svg>',1),G=[q],I={class:"mb-2 mt-6"},Q=e("div",{class:"mb-3 text-lg font-medium my-1"},"Konten",-1),W={key:0};function X(a,o,$,ee,t,r){const h=x,p=n("v-card"),_=n("v-dialog"),f=n("v-text-field"),g=n("v-select"),v=n("v-textarea"),b=n("v-img"),w=n("v-file-input"),k=N,y=V;return s(),d(E,null,[l(_,{modelValue:t.modalRemoveThumbnail,"onUpdate:modelValue":o[1]||(o[1]=i=>t.modalRemoveThumbnail=i),width:"auto"},{default:m(()=>[l(p,{height:"auto",style:{"scrollbar-width":"none"}},{title:m(()=>[e("div",D,[O,e("div",{onClick:o[0]||(o[0]=i=>t.modalRemoveThumbnail=!1),class:"cursor-pointer"},j)])]),text:m(()=>[A]),actions:m(()=>[e("div",H,[l(h,{onClick:r.removeThumbnailNews,class:"w-fit mt-6 bg-[#FC4100] text-white px-3 mx-1 mb-2 py-2 text-md",label:"Hapus"},null,8,["onClick"])])]),_:1})]),_:1},8,["modelValue"]),e("div",L,[e("div",M,[e("div",z,[K,e("div",P,[e("div",J,[l(f,{modelValue:t.form.title,"onUpdate:modelValue":o[2]||(o[2]=i=>t.form.title=i),variant:"outlined","hide-details":"auto",label:"Judul Berita"},null,8,["modelValue"])]),e("div",null,[l(g,{"item-value":"name","item-text":"name",modelValue:t.form.category,"onUpdate:modelValue":o[3]||(o[3]=i=>t.form.category=i),label:"Kategori Berita",items:t.categories,variant:"outlined"},null,8,["modelValue","items"])])]),e("div",null,[l(v,{rows:"3",variant:"outlined",label:"Deskripsi Berita",clearable:"",modelValue:t.form.description,"onUpdate:modelValue":o[4]||(o[4]=i=>t.form.description=i)},null,8,["modelValue"])]),Y,t.thumbnailUploaded?(s(),d("div",Z,[l(b,{src:t.form.thumbnail,width:"300"},null,8,["src"]),e("div",{onClick:o[5]||(o[5]=i=>t.modalRemoveThumbnail=!0),class:"absolute cursor-pointer right-3 top-3 z-50"},G)])):c("",!0),e("div",I,[t.thumbnailUploaded?c("",!0):(s(),u(w,{key:0,clearable:!1,modelValue:t.form.thumbnail,"onUpdate:modelValue":o[6]||(o[6]=i=>t.form.thumbnail=i),label:"Thumbnail Berita",variant:"outlined"},null,8,["modelValue"]))]),Q,t.renderRichEditor?(s(),u(k,{key:1,data:t.data,onContentChange:r.contentChange},null,8,["data","onContentChange"])):c("",!0),l(h,{onClick:r.addNews,class:"mt-5 bg-[#10B981] text-white px-3 py-2"},{default:m(()=>[t.loading?(s(),u(y,{key:1})):(s(),d("span",W,"Submit"))]),_:1},8,["onClick"])])])])],64)}const de=R(U,[["render",X]]);export{de as default};
