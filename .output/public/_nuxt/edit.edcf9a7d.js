import b from"./button.esm.de118b49.js";import{c as g,_ as v}from"./RichEditor.client.1608168f.js";import{_ as k}from"./Loader.8f366148.js";import{$ as w,b as r,l as i,w as s,i as t,c as h,e as y,F as C,r as m,o as l}from"./entry.ad1a8891.js";import"./badge.esm.a8bb659d.js";import"./basecomponent.esm.1e1342cd.js";import"./index.esm.cdfd46e0.js";import"./baseicon.esm.2538c2f4.js";const T=g(v),V={class:"flex items-center justify-between"},x=t("div",{class:"text-xl font-semibold"},[t("span",null,"Hapus Thumbnail?")],-1),$=t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"2em",height:"2em",viewBox:"0 0 24 24"},[t("g",{fill:"none",stroke:"black","stroke-width":"1.5"},[t("circle",{cx:"12",cy:"12",r:"10"}),t("path",{"stroke-linecap":"round",d:"m14.5 9.5l-5 5m0-5l5 5"})])],-1),E=[$],R=t("div",null,[t("span",null,"Thumbnail akan dihapus dari server, apakah anda yakin untuk menghapusnya?")],-1),B={class:"w-full flex justify-end"},D={class:"grid"},N={class:"col-12"},P={class:"card"},U=t("h3",{class:"text-2xl font-medium mb-5"},"Ubah Pengumuman",-1),A={class:"mb-8"},F={class:"mb-8"},H=t("div",{class:"mb-3 text-lg font-medium my-1"},"Konten",-1),j={key:0},O={data(){return{modalRemoveThumbnail:!1,data:null,image:null,renderRichEditor:!1,thumbnailDeleted:!1,loading:!1,form:{title:null,category:null,description:null,content:null,thumbnail:""}}},async mounted(){const a=await $fetch("http://api.desaku.muhichsan.com/api/announcement/"+this.$route.query.id);this.form=a,this.data=a.content,this.renderRichEditor=!0},methods:{async updateAnnouncement(){if(this.loading=!0,this.thumbnailDeleted){let a=await this.uploadThumbnail();this.form.thumbnail=a}this.form.content=this.data,await $fetch("http://api.desaku.muhichsan.com/api/announcement/"+this.$route.query.id,{method:"PATCH",body:this.form}),this.loading=!1,this.$router.push("/dashboard/announcement")},contentChange(a){this.data=a},async uploadThumbnail(){const a=new FormData;return a.append("image",this.form.thumbnail),(await $fetch("http://api.desaku.muhichsan.com/api/image",{body:a,method:"POST"})).data},async removeThumbnailNews(){let a=this.form.thumbnail.replace("http://api.desaku.muhichsan.com/storage/","");await $fetch("http://api.desaku.muhichsan.com/api/image/"+a,{method:"DELETE"}),this.thumbnailDeleted=!0,this.modalRemoveThumbnail=!1}}},M=Object.assign(O,{__name:"edit",setup(a){return w({title:"Edit Announcement"}),(e,n)=>{const d=b,c=m("v-card"),p=m("v-dialog"),u=m("v-text-field"),_=T,f=k;return l(),r(C,null,[i(p,{modelValue:e.modalRemoveThumbnail,"onUpdate:modelValue":n[1]||(n[1]=o=>e.modalRemoveThumbnail=o),width:"auto"},{default:s(()=>[i(c,{height:"auto",style:{"scrollbar-width":"none"}},{title:s(()=>[t("div",V,[x,t("div",{onClick:n[0]||(n[0]=o=>e.modalRemoveThumbnail=!1),class:"cursor-pointer"},E)])]),text:s(()=>[R]),actions:s(()=>[t("div",B,[i(d,{onClick:e.removeThumbnailNews,class:"w-fit mt-6 bg-[#FC4100] text-white px-3 mx-1 mb-2 py-2 text-md",label:"Hapus"},null,8,["onClick"])])]),_:1})]),_:1},8,["modelValue"]),t("div",D,[t("div",N,[t("div",P,[U,t("div",A,[i(u,{modelValue:e.form.title,"onUpdate:modelValue":n[2]||(n[2]=o=>e.form.title=o),variant:"outlined","hide-details":"auto",label:"Judul Pengumuman"},null,8,["modelValue"])]),t("div",F,[i(u,{modelValue:e.form.description,"onUpdate:modelValue":n[3]||(n[3]=o=>e.form.description=o),variant:"outlined","hide-details":"auto",label:"Deksripsi Pengumuman"},null,8,["modelValue"])]),H,e.renderRichEditor?(l(),h(_,{key:0,data:e.data,onContentChange:e.contentChange},null,8,["data","onContentChange"])):y("",!0),i(d,{onClick:e.updateAnnouncement,class:"mt-5 bg-[#10B981] text-white px-3 py-2"},{default:s(()=>[e.loading?(l(),h(f,{key:1})):(l(),r("span",j,"Ubah"))]),_:1},8,["onClick"])])])])],64)}}});export{M as default};
