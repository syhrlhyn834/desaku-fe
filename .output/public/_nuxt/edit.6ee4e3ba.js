import w from"./button.esm.42d3b006.js";import{c as x,_ as y}from"./RichEditor.client.9ecbdfc1.js";import{_ as C}from"./Loader.21b59792.js";import{Y as T,b as u,l as a,w as s,i as e,e as r,c as h,F as V,r as m,o as l,a6 as D}from"./entry.95699424.js";import"./badge.esm.d0e226d1.js";import"./basecomponent.esm.82efc321.js";import"./index.esm.063ab9bc.js";import"./baseicon.esm.5d04c19f.js";const R=x(y),B={data(){return{modalRemoveThumbnail:!1,data:null,image:null,renderRichEditor:!1,thumbnailDeleted:!1,loading:!1,form:{title:null,category:null,description:null,content:null,thumbnail:""}}},async mounted(){const o=await $fetch("http://127.0.0.1:8000/api/announcement/"+this.$route.query.id);this.form=o,this.data=o.content,this.renderRichEditor=!0},methods:{async updateAnnouncement(){if(this.loading=!0,this.thumbnailDeleted){let o=await this.uploadThumbnail();this.form.thumbnail=o}this.form.content=this.data,await $fetch("http://127.0.0.1:8000/api/announcement/"+this.$route.query.id,{method:"PATCH",body:this.form}),this.loading=!1,this.$router.push("/dashboard/announcement")},contentChange(o){this.data=o},async uploadThumbnail(){const o=new FormData;return o.append("image",this.form.thumbnail),(await $fetch("http://127.0.0.1:8000/api/image",{body:o,method:"POST"})).data},async removeThumbnailNews(){let o=this.form.thumbnail.replace("http://127.0.0.1:8000/storage/","");await $fetch("http://127.0.0.1:8000/api/image/"+o,{method:"DELETE"}),this.thumbnailDeleted=!0,this.modalRemoveThumbnail=!1}}},E={class:"flex items-center justify-between"},A=e("div",{class:"text-xl font-semibold"},[e("span",null,"Hapus Thumbnail?")],-1),N=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"2em",height:"2em",viewBox:"0 0 24 24"},[e("g",{fill:"none",stroke:"black","stroke-width":"1.5"},[e("circle",{cx:"12",cy:"12",r:"10"}),e("path",{"stroke-linecap":"round",d:"m14.5 9.5l-5 5m0-5l5 5"})])],-1),P=[N],S=e("div",null,[e("span",null,"Thumbnail akan dihapus dari server, apakah anda yakin untuk menghapusnya?")],-1),U={class:"w-full flex justify-end"},F={class:"grid"},H={class:"col-12"},O={class:"card"},j=e("h3",{class:"text-2xl font-medium mb-5"},"Ubah Pengumuman",-1),L={class:"mb-8"},M={class:"mb-8"},q=e("div",{class:"mb-3 text-lg font-medium my-1"},"Thumbnail Pengumuman",-1),z={key:0,class:"relative w-fit"},I=D('<svg xmlns="http://www.w3.org/2000/svg" width="1.5em" height="1.5em" viewBox="0 0 48 48"><defs><mask id="ipSCloseOne0"><g fill="none" stroke-linejoin="round" stroke-width="4"><path fill="#fff" stroke="#fff" d="M24 44c11.046 0 20-8.954 20-20S35.046 4 24 4S4 12.954 4 24s8.954 20 20 20Z"></path><path stroke="#000" stroke-linecap="round" d="M29.657 18.343L18.343 29.657m0-11.314l11.314 11.314"></path></g></mask></defs><path fill="#A3A3A3" d="M0 0h48v48H0z" mask="url(#ipSCloseOne0)"></path></svg>',1),K=[I],Y={class:"mb-8 mt-6"},Z=e("div",{class:"mb-3 text-lg font-medium my-1"},"Konten",-1),G={key:0};function J(o,n,Q,W,t,d){const c=w,_=m("v-card"),f=m("v-dialog"),p=m("v-text-field"),b=m("v-img"),v=m("v-file-input"),g=R,k=C;return l(),u(V,null,[a(f,{modelValue:t.modalRemoveThumbnail,"onUpdate:modelValue":n[1]||(n[1]=i=>t.modalRemoveThumbnail=i),width:"auto"},{default:s(()=>[a(_,{height:"auto",style:{"scrollbar-width":"none"}},{title:s(()=>[e("div",E,[A,e("div",{onClick:n[0]||(n[0]=i=>t.modalRemoveThumbnail=!1),class:"cursor-pointer"},P)])]),text:s(()=>[S]),actions:s(()=>[e("div",U,[a(c,{onClick:d.removeThumbnailNews,class:"w-fit mt-6 bg-[#FC4100] text-white px-3 mx-1 mb-2 py-2 text-md",label:"Hapus"},null,8,["onClick"])])]),_:1})]),_:1},8,["modelValue"]),e("div",F,[e("div",H,[e("div",O,[j,e("div",L,[a(p,{modelValue:t.form.title,"onUpdate:modelValue":n[2]||(n[2]=i=>t.form.title=i),variant:"outlined","hide-details":"auto",label:"Deskripsi Pengumuman"},null,8,["modelValue"])]),e("div",M,[a(p,{modelValue:t.form.description,"onUpdate:modelValue":n[3]||(n[3]=i=>t.form.description=i),variant:"outlined","hide-details":"auto",label:"Deksripsi Pengumuman"},null,8,["modelValue"])]),q,!t.thumbnailDeleted&&t.form.thumbnail?(l(),u("div",z,[a(b,{src:t.form.thumbnail,width:"300"},null,8,["src"]),e("div",{onClick:n[4]||(n[4]=i=>t.modalRemoveThumbnail=!0),class:"absolute cursor-pointer right-3 top-3 z-50"},K)])):r("",!0),e("div",Y,[t.thumbnailDeleted||!t.form.thumbnail?(l(),h(v,{key:0,clearable:!1,modelValue:t.form.thumbnail,"onUpdate:modelValue":n[5]||(n[5]=i=>t.form.thumbnail=i),label:"Thumbnail Berita",variant:"outlined"},null,8,["modelValue"])):r("",!0)]),Z,t.renderRichEditor?(l(),h(g,{key:1,data:t.data,onContentChange:d.contentChange},null,8,["data","onContentChange"])):r("",!0),a(c,{onClick:d.updateAnnouncement,class:"mt-5 bg-[#10B981] text-white px-3 py-2"},{default:s(()=>[t.loading?(l(),h(k,{key:1})):(l(),u("span",G,"Ubah"))]),_:1},8,["onClick"])])])])],64)}const le=T(B,[["render",J]]);export{le as default};
